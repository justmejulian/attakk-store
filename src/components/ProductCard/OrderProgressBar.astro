---
interface Props {
  orderCount: number;
  maxOrders?: number;
}

const { orderCount, maxOrders = 5 } = Astro.props;
const percentage = Math.min(orderCount / maxOrders, 1) * 100;
const ariaValue = Math.min(orderCount, maxOrders) * (100 / maxOrders);
const isFull = orderCount >= maxOrders;
---

{
  orderCount > 0 && (
    <div
      role="progressbar"
      aria-valuenow={ariaValue}
      aria-valuemin="0"
      aria-valuemax="100"
      class="mb-2"
      title={`${orderCount}/${maxOrders} ${orderCount === 1 ? 'order' : 'orders'}`}
    >
      <div class="w-full border-2 border-black bg-white p-0.5">
        <div class="bg-primary h-3" style={`width: ${percentage}%`} />
      </div>
    </div>
  )
}
