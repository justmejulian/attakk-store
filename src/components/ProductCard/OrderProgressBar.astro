---
interface Props {
  orderCount: number;
  maxOrders?: number;
}

const { orderCount, maxOrders = 5 } = Astro.props;
const remainingOrders = maxOrders - orderCount;
const absoluteRemainingOrders = remainingOrders || 0;
const percentage = Math.min(orderCount / maxOrders, 1) * 100;
const ariaValue = Math.min(orderCount, maxOrders) * (100 / maxOrders);
const isFull = orderCount >= maxOrders;
const toolTip = isFull
  ? 'Minimum Required orders reached ðŸš€'
  : `Only ${absoluteRemainingOrders} more orders needed.`;
---

<div
  role="progressbar"
  aria-valuenow={ariaValue}
  aria-valuemin="0"
  aria-valuemax="100"
  class="mb-2"
  title={toolTip}
>
  <div class="w-full border-2 border-black bg-white p-0.5">
    <div class="bg-primary h-3" style={`width: ${percentage}%`}></div>
  </div>
</div>
